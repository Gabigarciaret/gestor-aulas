<div class="registrar-container">
  <div class="registrar-content">
    <div class="registrar-header">
      <h1>Registrar Nuevo Usuario</h1>
      <button routerLink="/gestionUsuarios" class="btn-volver">← Volver</button>
    </div>

    <form [formGroup]="form" (ngSubmit)="enviar()" class="registrar-form">
      <div class="form-row">
        <div class="campo">
          <label for="nombre">Nombre</label>
          <input formControlName="nombre" id="nombre" type="text" placeholder="Ingrese el nombre">
          @if (form.get('nombre')?.dirty && form.get('nombre')?.hasError('minlength')) {
            <span class="error">El nombre debe tener al menos 2 caracteres</span>
          }
        </div>

        <div class="campo">
          <label for="apellido">Apellido</label>
          <input formControlName="apellido" id="apellido" type="text" placeholder="Ingrese el apellido">
          @if (form.get('apellido')?.dirty && form.get('apellido')?.hasError('minlength')) {
            <span class="error">El apellido debe tener al menos 2 caracteres</span>
          }
        </div>
      </div>

      <div class="campo">
        <label for="email">Correo Electrónico</label>
        <input formControlName="email" id="email" type="email" placeholder="ejemplo@correo.com">
        @if (form.get('email')?.dirty && form.get('email')?.hasError('email')) {
          <span class="error">Ingrese un correo electrónico válido</span>
        }
      </div>

      <div class="form-row">
        <div class="campo">
          <label for="password">Contraseña</label>
          <input formControlName="password" id="password" type="password" placeholder="Mínimo 3 caracteres">
          @if (form.get('password')?.dirty && form.get('password')?.hasError('minlength')) {
            <span class="error">La contraseña debe tener al menos 3 caracteres</span>
          }
        </div>

        <div class="campo">
          <label for="confirmar-password">Confirmar Contraseña</label>
          <input formControlName="passwordConfirmar" id="confirmar-password" type="password" placeholder="Repita la contraseña">
        </div>
      </div>

      <div class="campo">
        <label for="rol">Rol del Usuario</label>
        <select formControlName="rol" id="rol">
          <option value="">Seleccione un rol</option>
          <option value="ADMIN">Administrador</option>
          <option value="PROFESOR">Profesor</option>
        </select>
      </div>

      <div class="form-actions">
        <button [disabled]="form.invalid" type="submit" class="btn-registrar">
          Registrar Usuario
        </button>
      </div>

      @if (error()) {
        <span class="mensaje-resultado error">{{ error() }}</span>
      } @else if (mensajeExito()) {
        <span class="mensaje-resultado exito">{{ mensajeExito() }}</span>
      }
    </form>
  </div>
</div>
